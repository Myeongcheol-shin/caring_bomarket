<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="threejs_model.css">
    <title>Local Life Mobility</title>
</head>
<body>
    <a href="./main.html" class="logo">
        <img alt="" src="./images/logo_left_transparent.png" style="width: 13.85vw; height:auto; margin-left: 4.47vw; margin-top: 2.76vw;">
    </a>
    <div class="video_box" style="display: flex; justify-content: center;">
        <div class="video" style="margin-top: 2.7vw; height: 53.2vw; width: 94.58vw;">
            <video poster="./images/suburban1.png" style="width: 100%; height: 100%;" controls>
                <source src="./video_file.mp4" type="video/mp4">
                이 문장은 여러분의 브라우저가 video 태그를 지원하지 않을 때 화면에 표시됩니다!
            </video>
        </div>
    </div>
    <div class="video_bar" style="margin-top: 1.2vw; height: 8.59vw; display: flex; justify-content: center;">
        <div class="bar_1" style="height: 0.78vw; left: 0px; width: 22.86vw; display: inline-block; margin-right: 0.52vw;">
            <img alt="" src="./images/black_line.png" style="width: 100%; height: 100%; margin: 0px; border-radius: 0px; display: block">
            <div class="senario" style="display: flex; justify-content: center; font-family: Helvetica; font-size: 1.25vw; margin-top: 1.48vw; line-height: 1.67vw;">
                <div class="content">Scenario 1</div>
            </div>
            <div class="senario" style="display: flex; justify-content: center; font-family: Helvetica; font-size: 1.51vw; margin-top: 0.417vw; line-height: 1.72vw; font-weight: 700;">
                <div class="content">Farm to Table</div>
            </div>
            <div class="senario" style="display: flex; justify-content: center; font-family: Helvetica; font-size: 1.04vw; margin-top: 0.21vw; line-height: 1.35vw;">
                <div class="content">농장에서 테이블로</div>
            </div>
        </div>
        <div class="bar_2" style="height: 0.78vw; left: 0px; width: 22.86vw; display: inline-block; margin-right: 0.52vw; margin-left: 0.52vw;">
            <img alt="" src="./images/gray_line.png" style="width: 100%; height: 100%; margin: 0px; border-radius: 0px; display: block">
            <div class="senario" style="display: flex; justify-content: center; font-family: Helvetica; font-size: 1.25vw; margin-top: 1.48vw; line-height: 1.67vw">
                <div class="content">Scenario 2</div>
            </div>
            <div class="senario" style="display: flex; justify-content: center; font-family: Helvetica; font-size: 1.51vw; margin-top: 0.417vw; line-height: 1.72vw; font-weight: 700;">
                <div class="content">Life On Demand</div>
            </div>
            <div class="senario" style="display: flex; justify-content: center; font-family: Helvetica; font-size: 1.04vw; margin-top: 0.21vw; line-height: 1.35vw;">
                <div class="content">주문형 생활</div>
            </div>
        </div>
        <div class="bar_3" style="height: 0.78vw; left: 0px; width: 22.86vw; display: inline-block; margin-right: 0.52vw; margin-left: 0.52vw;">
            <img alt="" src="./images/gray_line.png" style="width: 100%; height: 100%; margin: 0px; border-radius: 0px; display: block;">
            <div class="senario" style="display: flex; justify-content: center; font-family: Helvetica; font-size: 1.25vw; margin-top: 1.48vw; line-height: 1.67vw">
                <div class="content">Scenario 3</div>
            </div>
            <div class="senario" style="display: flex; justify-content: center; font-family: Helvetica; font-size: 1.51vw; margin-top: 0.417vw; line-height: 1.72vw; font-weight: 700;">
                <div class="content">Heart to Heart</div>
            </div>
            <div class="senario" style="display: flex; justify-content: center; font-family: Helvetica; font-size: 1.04vw; margin-top: 0.21vw; line-height: 1.35vw;">
                <div class="content">마음에서 마음으로</div>
            </div>
        </div>
        <div class="bar_4" style="height: 0.78vw; left: 0px; width: 22.86vw; display: inline-block; margin-left: 0.52vw;">
            <img alt="" src="./images/gray_line.png" style="width: 100%; height: 100%; margin: 0px; border-radius: 0px; display: block">
            <div class="senario" style="display: flex; justify-content: center; font-family: Helvetica; font-size: 1.25vw; margin-top: 1.48vw; line-height: 1.67vw">
                <div class="content">Function</div>
            </div>
            <div class="senario" style="display: flex; justify-content: center; font-family: Helvetica; font-size: 1.51vw; margin-top: 0.417vw; line-height: 1.72vw; font-weight: 700;">
                <div class="content">Specification</div>
            </div>
            <div class="senario" style="display: flex; justify-content: center; font-family: Helvetica; font-size: 1.04vw; margin-top: 0.21vw; line-height: 1.35vw;">
                <div class="content">기능 살펴보기</div>
            </div>
        </div>
    </div>
    <div class="3D_Simulator" style="margin-top: 10.68vw; margin-left: 4.479vw; display: block">
        <div class="Simulator_1" style="margin-bottom: 1.04vw; font-family: helvetica-43-light-extended; font-size: 2.604vw; line-height: 3.02vw; font-weight: 400;">3D Simulator</div>
        <div class="Simulator_2" style="font-family: helvetica-43-light-extended; font-size: 1.25vw; line-height: 1.46vw; font-weight: 400;">3D Simulator에서 시나리오 별로</div>
        <div class="Simulator_3" style="font-family: helvetica-43-light-extended; font-size: 1.25vw; line-height: 1.46vw; font-weight: 400;">Local-life Mobility의 다양한 기능을 만나보세요.</div>
    </div>
    <div id="main_body" style="margin-top: 6rem;">
        <div id="select_scenario">
            <div id="scenario1">
                <img src="./images/part1.png">
            </div>
            <div id="scenario2">
                <img src="./images/part2s.png">
            </div>
            <div id="scenario3">
                <img src="./images/part3s.png">
            </div>
            <div id="scenario4">
                <img src="./images/part4s.png">
            </div>
        </div> 
        <div id="three_js_body">
            <img id="loading" src="./images/loading.gif">
        </div>
        </div>
    </div>
    <div id="explain_body">
        <div id="eb_up"></div>
        <div id="eb_down">
            <hr id="up_hr">
            <hr>
        </div>
    </div>
         <!--<div class="bubble-r-box" style="height: 162.999px; left: 249.923px; width: 22.86vw;">
                <div class="bubble-element Group" style="width: 22.86vw; left: 0px; box-sizing: border-box; z-index: 6; height: 162.999px; top: 0px; background-color: rgba(0, 0, 0, 0); border-radius: 0px;">
                    <div class="bubble-r-line" style="margin-top: 14px; height: 0.78vw;">
                        <div class="bubble-r-box" style="height: 0.78vw; left: 0px; width: 22.86vw;">
                            <div class="bubble-element Image" style="box-sizing: border-box; z-index: 4; height: 0.78vw; width: 22.86vw; left: 0px; top: 0px; border-radius: 0px;">
                                <img alt="" src="./images/black_line.png" style="display: block; margin: 0px; width: 100%; height: 100%; border-radius: 0px;">
                            </div>
                        </div>
                    </div>
                    <div class="bubble-r-line" style="margin-top: 22px; height: 112px;">
                        <div class="bubble-r-box" style="height: 112px; left: 97.9923px; width: 240px;">
                            <div class="bubble-element Text" style="position: absolute; box-sizing: border-box; z-index: 4; height: 52px; width: 136px; left: 54px; top: 0px; white-space: pre-wrap; overflow: visible; padding-bottom: 0px; font-family: Helvetica; font-size: 24px; color: rgb(0, 0, 0); text-align: center; line-height: 1.16667; border-radius: 0px;"><div class="content">Scenario 1</div></div>
                            <div class="bubble-element Shape" style="position: absolute; box-sizing: border-box; z-index: 2; height: 100px; width: 240px; left: 0px; top: 4px; background-color: rgba(0, 0, 0, 0); border-radius: 0px;"></div>
                            <div class="bubble-element Text" style="position: absolute; box-sizing: border-box; z-index: 2; height: 53px; width: 208px; left: 17px; top: 39px; white-space: pre-wrap; overflow: visible; padding-bottom: 0px; font-family: Helvetica; font-size: 28px; font-weight: 700; color: rgb(0, 0, 0); text-align: center; line-height: 1.17857; border-radius: 0px;"><div class="content">Farm to Table</div></div>
                            <div class="bubble-element Text" style="position: absolute; box-sizing: border-box; z-index: 2; height: 46px; width: 173px; left: 35px; top: 66px; white-space: pre-wrap; overflow: visible; padding-bottom: 0px; font-family: Helvetica; font-size: 19px; color: rgb(0, 0, 0); text-align: center; line-height: 1.21053; padding-top: 11.5px; border-radius: 0px;"><div class="content">농장에서 테이블로</div></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="bubble-r-box" style="height: 163px; left: 772.231px; width: 22.86vw;">
                <div class="bubble-element Group" style="width: 22.86vw; left: 0px; position: absolute; box-sizing: border-box; z-index: 17; height: 163px; top: 0px; background-color: rgba(0, 0, 0, 0); border-radius: 0px;">
                    <div class="bubble-r-line" style="margin-top: 14px; height: 0.78vw;">
                        <div class="bubble-r-box" style="height: 0.78vw; left: 0px; width: 22.86vw;">
                            <div class="bubble-element Image" style="position: absolute; box-sizing: border-box; z-index: 4; height: 0.78vw; width: 22.86vw; left: 0px; top: 0px; border-radius: 0px;">
                                <img alt="" src="./images/gray_line.png" style="display: block; margin: 0px; width: 100%; height: 100%; border-radius: 0px;">
                            </div>
                        </div>
                    </div>
                    <div class="bubble-r-line" style="margin-top: 22px; height: 109px;">
                        <div class="bubble-r-box" style="height: 109px; left: 95px; width: 245.984px;">
                            <div class="bubble-element Text" style="position: absolute; box-sizing: border-box; z-index: 2; height: 48px; width: 136px; left: 56.9919px; top: 0px; white-space: pre-wrap; overflow: visible; padding-bottom: 0px; font-family: Helvetica; font-size: 24px; color: rgb(152, 152, 152); text-align: center; line-height: 1.16667; border-radius: 0px;"><div class="content">Scenario 2</div></div>
                            <div class="bubble-element Shape" style="position: absolute; box-sizing: border-box; z-index: 2; height: 100px; width: 240px; left: 0px; top: 4px; background-color: rgba(0, 0, 0, 0); border-radius: 0px;"></div>
                            <div class="bubble-element Text" style="position: absolute; box-sizing: border-box; z-index: 2; height: 53px; width: 242px; left: 3.98438px; top: 39px; white-space: pre-wrap; overflow: visible; padding-bottom: 0px; font-family: Helvetica; font-size: 28px; font-weight: 700; color: rgb(152, 152, 152); text-align: center; line-height: 1.17857; border-radius: 0px;"><div class="content">Life On Demand</div></div>
                            <div class="bubble-element Text" style="position: absolute; box-sizing: border-box; z-index: 2; height: 43px; width: 118px; left: 64.9921px; top: 66px; white-space: pre-wrap; overflow: visible; padding-bottom: 0px; font-family: Helvetica; font-size: 19px; color: rgb(152, 152, 152); text-align: center; line-height: 1.21053; padding-top: 10px; border-radius: 0px;"><div class="content">주문형 생활</div></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="bubble-r-box" style="height: 164px; left: 1303.79px; width: 439px;">
                <div class="bubble-element Group" style="width: 439px; left: 0px; position: absolute; box-sizing: border-box; z-index: 7; height: 164px; top: 0px; background-color: rgba(0, 0, 0, 0); border-radius: 0px;">
                    <div class="bubble-r-line" style="margin-top: 14px; height: 15px;">
                        <div class="bubble-r-box" style="height: 15px; left: 0px; width: 22.86vw;">
                            <div class="bubble-element Image" style="position: absolute; box-sizing: border-box; z-index: 4; height: 15px; width: 22.86vw; left: 0px; top: 0px; border-radius: 0px;">
                                <img alt="" src="./images/gray_line.png" style="display: block; margin: 0px; width: 100%; height: 100%; border-radius: 0px;">
                            </div>
                        </div>
                    </div>
                    <div class="bubble-r-line" style="margin-top: 22px; height: 109px;"><div class="bubble-r-box" style="height: 109px; left: 99.9921px; width: 240px;">
                        <div class="bubble-element Text" style="position: absolute; box-sizing: border-box; z-index: 4; height: 48px; width: 136px; left: 52px; top: 0px; white-space: pre-wrap; overflow: visible; padding-bottom: 0px; font-family: Helvetica; font-size: 24px; color: rgb(152, 152, 152); text-align: center; line-height: 1.16667; border-radius: 0px;"><div class="content">Scenario 3</div></div>
                        <div class="bubble-element Shape" style="position: absolute; box-sizing: border-box; z-index: 2; height: 100px; width: 240px; left: 0px; top: 4px; background-color: rgba(0, 0, 0, 0); border-radius: 0px;"></div>
                        <div class="bubble-element Text" style="position: absolute; box-sizing: border-box; z-index: 2; height: 53px; width: 212px; left: 14px; top: 39px; white-space: pre-wrap; overflow: visible; padding-bottom: 0px; font-family: Helvetica; font-size: 28px; font-weight: 700; color: rgb(152, 152, 152); text-align: center; line-height: 1.17857; border-radius: 0px;"><div class="content">Heart to Heart</div></div>
                        <div class="bubble-element Text" style="position: absolute; box-sizing: border-box; z-index: 2; height: 43px; width: 173px; left: 34px; top: 66px; white-space: pre-wrap; overflow: visible; padding-bottom: 0px; font-family: Helvetica; font-size: 19px; color: rgb(152, 152, 152); text-align: center; line-height: 1.21053; padding-top: 10px; border-radius: 0px;"><div class="content">마음에서 마음으로</div></div>
                    </div>
                </div>
            </div>
        
        <div class="bubble-r-box" style="height: 165px; left: 1835.36px; width: 439px;">
            <div class="bubble-element Group" style="width: 439px; left: 0px; position: absolute; box-sizing: border-box; z-index: 8; height: 165px; top: 0px; background-color: rgba(0, 0, 0, 0); border-radius: 0px;">
                <div class="bubble-r-line" style="margin-top: 14px; height: 15px;">
                    <div class="bubble-r-box" style="height: 15px; left: -1px; width: 22.86vw;">
                        <div class="bubble-element Image" style="position: absolute; box-sizing: border-box; z-index: 4; height: 15px; width: 22.86vw; left: 0px; top: 0px; border-radius: 0px;">
                            <img alt="" src="./images/gray_line.png" style="display: block; margin: 0px; width: 100%; height: 100%; border-radius: 0px;">
                        </div>
                    </div>
                </div>
                <div class="bubble-r-line" style="margin-top: 22px; height: 112px;">
                    <div class="bubble-r-box" style="height: 112px; left: 99.9921px; width: 240px;">
                        <div class="bubble-element Text" style="position: absolute; box-sizing: border-box; z-index: 2; height: 52px; width: 113px; left: 64px; top: 0px; white-space: pre-wrap; overflow: visible; padding-bottom: 0px; font-family: Helvetica; font-size: 24px; color: rgb(152, 152, 152); text-align: center; line-height: 1.16667; border-radius: 0px;"><div class="content">Function</div></div>
                        <div class="bubble-element Shape" style="position: absolute; box-sizing: border-box; z-index: 2; height: 100px; width: 240px; left: 0px; top: 4px; background-color: rgba(0, 0, 0, 0); border-radius: 0px;"></div>
                        <div class="bubble-element Text" style="position: absolute; box-sizing: border-box; z-index: 2; height: 53px; width: 201px; left: 19px; top: 39px; white-space: pre-wrap; overflow: visible; padding-bottom: 0px; font-family: Helvetica; font-size: 28px; font-weight: 700; color: rgb(152, 152, 152); text-align: center; line-height: 1.17857; border-radius: 0px;"><div class="content">Specification</div></div>
                        <div class="bubble-element Text" style="position: absolute; box-sizing: border-box; z-index: 2; height: 46px; width: 136px; left: 52px; top: 66px; white-space: pre-wrap; overflow: visible; padding-bottom: 0px; font-family: Helvetica; font-size: 19px; color: rgb(152, 152, 152); text-align: center; line-height: 1.21053; padding-top: 11.5px; border-radius: 0px;"><div class="content">기능 살펴보기</div></div>
                    </div>
                </div>
            </div>
        </div>
    <div class="bubble-r-line" style="margin-top: 193px; height: 166px;">
        <div class="bubble-r-box" style="height: 166px; left: 120.571px; width: 504px;">
            <div class="bubble-element Group" style="width: 504px; left: 0px; position: absolute; box-sizing: border-box; z-index: 10; height: 166px; top: 0px; background-color: rgba(0, 0, 0, 0); border-radius: 0px;">
                <div class="bubble-r-line" style="margin-top: 0px; height: 78px;">
                    <div class="bubble-r-box" style="height: 78px; left: -10px; width: 320px;">
                        <div class="bubble-element Text" style="position: absolute; box-sizing: border-box; z-index: 2; height: 78px; width: 320px; left: 0px; top: 0px; white-space: pre-wrap; overflow: visible; padding-bottom: 0px; font-family: helvetica-43-light-extended; font-size: 49px; color: rgb(0, 0, 0); text-align: center; line-height: 1.16327; border-radius: 0px;"><div class="content">3D Simulator</div></div>
                    </div>
                </div>
                <div class="bubble-r-line" style="margin-top: 0px; height: 88px;">
                    <div class="bubble-r-box" style="height: 88px; left: 0px; width: 504px;">
                        <div class="bubble-element Text" style="position: absolute; box-sizing: border-box; z-index: 2; height: 88px; width: 504px; left: 0px; top: 0px; white-space: pre-wrap; overflow: visible; padding-bottom: 0px; font-family: helvetica-43-light-extended; font-size: 23px; color: rgb(0, 0, 0); line-height: 1.16667; border-radius: 0px;"><div class="content">3D Simulator에서 시나리오 별로
    Local-life Mobility의 다양한 기능을 만나보세요. </div></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
-->
</body>
<script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.7.0/firebase-app.js";
    import { getStorage, ref, getDownloadURL } from "https://www.gstatic.com/firebasejs/9.7.0/firebase-storage.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
  
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyCgyHE9mpg-5KJB8A5sZHEbu96T7N8UeN8",
      authDomain: "caring-bomarket.firebaseapp.com",
      projectId: "caring-bomarket",
      storageBucket: "caring-bomarket.appspot.com",
      messagingSenderId: "598139022428",
      appId: "1:598139022428:web:7b266eea9b575ed5770a99",
      measurementId: "G-89TPP0FB40"
    };
</script>
<script type="module" >
    import { GLTFLoader } from 'https://cdn.skypack.dev/three@0.130.0/examples/jsm/loaders/GLTFLoader.js';  
    import { OrbitControls } from 'https://cdn.skypack.dev/three@0.130.0/examples/jsm/controls/OrbitControls.js';
    import * as THREE from 'https://cdn.skypack.dev/three@0.130.0';
    let modelArray = [];
    let aElem = [];
    let clickedNumber = 0;
    let light,camera,loader,raycaster,renderer,scene,divContainer,vector,ulElem,loading;
    let functionFile = [['./images/fun1up.png','./images/fun1exp.png','./images/fun1down.png'],
    ['./images/fun2up.png','./images/fun2exp.png','./images/fun2down.png'],
    ['./images/fun3up.png','./images/fun3exp.png','./images/fun3down.png'],
    ['./images/fun4up.png','./images/fun4exp.png','./images/fun4down.png'],
    ['./images/fun5up.png','./images/fun5exp.png','./images/fun5down.png']];
    let functionIndex = [[1,5],[2,3,5],[4,5],[1,2,3,4,5]];
    class App{
        constructor() {
            
            this.getChild();
            this.setChildEvent();

            divContainer = document.querySelector('#three_js_body');
            this._divContainer = divContainer;

            loading = document.getElementById('loading')

            renderer = new THREE.WebGLRenderer({
                alpha: true,
            });
            renderer.setPixelRatio(window.devicePixelRatio);
            divContainer.appendChild(renderer.domElement);
            this._renderer = renderer;
            
            scene = new THREE.Scene();
            vector = new THREE.Vector3();
            raycaster = new THREE.Raycaster();
            this._scene = scene;
            this._scene.background = new THREE.Color( 0xffffff);;
            this._setupCamera();
            this._resizeCanvasToDisplaySize();
            this._setupLight();
            this._setupModule();    
            this._setupControls();


            requestAnimationFrame(this.render.bind(this));
        }
        getChild()
        {
            ulElem = document.getElementById('select_scenario');
            aElem = ulElem.children;

            var up_hr = document.getElementById('up_hr');

            var img = document.createElement('img');
            img.id = 'function_img';
            img.src = './images/fun1up.png';

            var img_explain = document.createElement('img');
            img_explain.id = 'function_explain_img';
            img_explain.src = './images/fun1exp.png';
            img_explain.style.display = 'none';

            up_hr.after(img);
            img.after(img_explain);
            img.addEventListener("click",function(){
                if(img_explain.style.display == "none")
                {
                    img_explain.style.display = "block";
                    var nowidx = parseInt(img.src.slice(-7,-6));
                    console.log(nowidx);
                    img.src = functionFile[nowidx-1][2];
                }
                else{
                    img_explain.style.display = "none";
                    var nowidx = parseInt(img.src.slice(-9,-8));
                    img.src = functionFile[nowidx-1][0];
                }
            })
        }
        setChildEvent()
        {
            for (let i = 0; i < 4; i++)
            {
                aElem[i].addEventListener("click", function() {
                    for(let k = 0; k < 4; k++){
                        if (k == i)
                        {
                            aElem[i].children[0].src = './images/part'+ String(i+1)+'.png';
                        }
                        else
                        {
                            aElem[k].children[0].src = './images/part'+ String(k+1) + 's.png';
                        }
                    }
                    clickedNumber = i;

                    var eb_down = document.getElementById('eb_down');
                    ///모든 요소 삭제
                    while (eb_down.childNodes.length > 2) {
                        eb_down.removeChild(eb_down.lastChild);
                    }
                    var up_hr = document.getElementById('up_hr');

                    for (let j = 0; j < functionIndex[i].length; j++){
                        let now_idx = functionIndex[i][j];
                        var img, img_explain;
                        for(let h = 0; h < functionFile[now_idx-1].length; h++){
                            if(h == 0)
                            {
                                var img = document.createElement('img');
                                img.id = 'function_img';
                                img.src = functionFile[now_idx-1][0];
                            }
                            else if(h == 1){
                                var img_explain = document.createElement('img');
                                img_explain.id = 'function_explain_img';
                                img_explain.src = functionFile[now_idx-1][1];
                                img_explain.style.display = 'none';
                            }
                        }
                        eb_down.appendChild(img);
                        eb_down.appendChild(img_explain);
                        var hrt = document.createElement('hr');
                        eb_down.appendChild(hrt);
                        img.addEventListener("click",function(){
                            var le = this.nextElementSibling;
                            if(le.style.display == "none")
                            {
                                le.style.display = "block";
                                var nowidx = parseInt(this.src.slice(-7,-6));
                                this.src = functionFile[nowidx-1][2];
                            }
                            else{
                                le.style.display = "none";
                                var nowidx = parseInt(this.src.slice(-9,-8));
                                this.src = functionFile[nowidx-1][0];
                            }
                        })
                    }
                });
            }
        }
        _resizeCanvasToDisplaySize()
        {
            const canvas = renderer.domElement;
            const width = canvas.clientWidth;
            const height = canvas.clientHeight;

            if (canvas.width !== width || canvas.height !== height){
                renderer.setSize(width,height,false);
                camera.aspect = width* 1 / height;
                camera.updateProjectionMatrix();

            }
        }
        _setupCamera()
        {
            const width = this._divContainer.clientWidth;
            const height = this._divContainer.clientHeight;
            camera = new THREE.PerspectiveCamera(
                80,
                width / height,
                0.1,
                100
            );
            camera.position.set(-5.2,0.4,1.4);
            this._camera = camera;
        }

        _setupLight() {
            const color = 0xffffff;
            const intensity = 3;
            light = new THREE.RectAreaLight(color, intensity);
            light.position.set( -5, 5, 0 );
            light.lookAt( 0, 0, 0 );
            this._scene.add(light);
        }
        _setupModule() {
            /*
            loader = new GLTFLoader();
            loader.load('https://firebasestorage.googleapis.com/v0/b/caring-bomarket.appspot.com/o/bomarket.glb?alt=media&token=c8420e7a-85aa-4bdc-aa75-220c0d6d9741.glb', (result) => { modelArray[0] = result.scene; this._displayModel(0);}, function(xhr){
                console.log((xhr.loaded/xhr.total*100)+'% loaded');
        },);
            */
        loader = new GLTFLoader();
        loader.load('./bomarket.glb', (result) => { modelArray[0] = result.scene; this._displayModel(0);});
        }
        _displayModel(index){
            modelArray[index].scale.set(1.7,1.7,1.7);
            modelArray[index].position.set(0,-2,-0.5);
            this._scene.add(modelArray[index]);
            loading.style.display = 'none';
            console.log('완료');
        }
        _setupControls()
        {
            new OrbitControls(this._camera, this._divContainer);
            new OrbitControls(light,this._divContainer);
        }
        resize() {
            const width = this._divContainer.clientWidth;
            const height = this._divContainer.clientHeight;

            this._camera.aspect = 1;
            this._camera.updateProjectionMatrix();

            this._renderer.setSize(width, height);
        }

        render(time)
        {   
            this._renderer.render(this._scene, this._camera);
            //this.update(time);

            requestAnimationFrame(this.render.bind(this));
        }

        update(time)
        {
            time *= 0.001
            this._scene.rotation.x = time;
            this._scene.rotation.y = time;
        }
    }
    window.onload = function() {
        new App();
    }
    </script>
</html>
